1. 搭建记录

## Hugo博客搭建

[toc]

偶然发现艾老师的博客页面非常简洁美观，再加上 **Hexo** 的性能着实堪忧，索性就来体验一下 **Hugo** ，下面记录一下搭建过程方便新入坑的人查看顺便做个备份。

<!--more-->

### 1 安装

- Hugo
- [Theme：Zozo](https://github.com/zhoukai0620/hugo-theme-zozo)

其他依赖：

- Git
- Go
- Pygments（语法高亮，可选）

```bash
$ sudo pacman -S hugo go
$ sudo pip install pygments
```

### 2 配置

#### 2.1 本地配置

建立本地仓库

```bash
$ hugo new site <repo_path>
```

添加主题

```bash
$ cd $repo_path/themes
$ git clone https://github.com/zhoukai0620/hugo-theme-zozo
```

从主题的 **exampleSite** 文件夹复制配置文件 **config.toml** 到站点根目录，基本配置如下

```toml
baseURL = "https://example.com"
languageCode = "zh-cn"
defaultContentLanguage = "zh-cn"
title = "无尽光芒"                    # site title  # 网站标题
theme = "zozo"
hasCJKLanguage = true                # has chinese/japanese/korean ? # 自动检测是否包含 中文\日文\韩文
summaryLength = 100
paginate = 4                         # shows the number of articles  # 首页显示文章数量
enableEmoji = true
googleAnalytics = ""                 # your google analytics id
disqusShortname = ""                 # your discuss shortname

[author]                             # essential                     # 必需
  name = "Zeuk"

[blackfriday]
  smartypants = false

[[menu.main]]                        # config your menu  # 配置菜单
  name = "首页"
  weight = 10
  identifier = "home"
  url = "/"
[[menu.main]]
  name = "归档"
  weight = 20
  identifier = "archive"
  url = "/posts/"
[[menu.main]]
  name = "标签"
  weight = 30
  identifier = "tags"
  url = "/tags/"
[[menu.main]]
  name = "关于"
  weight = 40
  identifier = "about"
  url = "/about/"

[params]
  subTitle = "the site subtitle"                                       # site's subTitle  # 网站二级标题
  footerSlogan = "我的精神家园"                                          # site's footer slogan  # 网站页脚标语
  keywords = ["Hugo", "theme","zozo"]                                  # site's keywords  # 网站关键字
  description = "Hugo theme zozo example site."                        # site's description  # 网站描述

# mathjax
  enableMathJax = true                                                 # enable mathjax  # 是否使用mathjax（数学公式）

  enableSummary = true                                                 # display the article summary  # 是否显示文章摘要
  
# Valine.
# You can get your appid and appkey from https://leancloud.cn
# more info please open https://valine.js.org
[params.valine]
  enable = false
  appId = ""
  appKey = ""
  placeholder = " "
  visitor = true

[social]
  github = " "
  twitter = " "
  facebook = " "
  weibo = " "
  instagram = " "
```

拥有大量的注释，非常容易理解。修改完毕即可查看效果：

```bash
$ hugo server
```

#### 2.2 Github配置

新建两个仓库，其中一个为`username.github.io`用于博客展示，另外一个取名随意，暂记A，用于存放整个站点文件，然后只勾选 **repo** 生成新 **token** ，注意这个只能查看一次，可以先保存下来。

#### 2.3 链接仓库

到 **Travis CI** 绑定你的 **github** 账户并激活仓库A，填入 **token** 

#### 2.4 本地文件配置

新建 **.travis.yml** 放在站点根目录

```yml
sudo: false
language: go
git:
        depth: 1
install: go get -v github.com/gohugoio/hugo
script: hugo
deploy:
        provider: pages
        skip_cleanup: true
        github_token: <token>
        on:
                branch: master
        local_dir: public
        repo: username/username.github.io
        fqdn: <custom-domain-if-needed>
        target_branch: master
        email: <github-email>
        name: <github-username>
```

#### 2.5 上传

将本地站点文件夹 **push** 到仓库 A

```bash
$ cd <repo_path>
$ git init
$ git remote add origin <仓库A的URL>
$ git add ./
$ git commit -m "upload blog"
$ git push -u origin master
```


**Hint:** 由于 **Travis CI** 对于 **Hugo** 来说太慢了，干脆两个仓库都自己管理